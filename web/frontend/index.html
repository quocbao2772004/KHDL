<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MovieFlix - Home</title>
    <link rel="stylesheet" href="css/style.css">
</head>

<body>

    <!-- Auth Overlay -->
    <div id="authOverlay">
        <div class="auth-box" id="loginBox">
            <h2>Sign In</h2>
            <input type="text" id="loginUser" class="auth-input" placeholder="Username">
            <input type="password" id="loginPass" class="auth-input" placeholder="Password">
            <button class="auth-btn" onclick="handleLogin()">Sign In</button>
            <div class="auth-switch">
                New to MovieFlix? <span onclick="showRegister()">Sign up now.</span>
            </div>
        </div>

        <div class="auth-box" id="registerBox" style="display: none;">
            <h2>Sign Up</h2>
            <input type="text" id="regUser" class="auth-input" placeholder="Username">
            <input type="password" id="regPass" class="auth-input" placeholder="Password">
            <button class="auth-btn" onclick="handleRegister()">Sign Up</button>
            <div class="auth-switch">
                Already have an account? <span onclick="showLogin()">Sign in.</span>
            </div>
        </div>
    </div>

    <!-- Main App -->
    <div id="app">
        <header id="navbar">
            <div class="logo" onclick="showHome()" style="cursor:pointer">MOVIEFLIX</div>

            <div class="search-box">
                <input type="text" id="searchInput" placeholder="Search movies, actors, directors..."
                    onkeypress="handleSearch(event)" oninput="handleSearchInput(event)">
                <button id="searchBtn" onclick="triggerSearch()">Search</button>
            </div>

            <div class="nav-right">
                <div id="userDisplay">User</div>
                <button onclick="logout()"
                    style="background:none; border:none; color:#fff; cursor:pointer;">Logout</button>
            </div>
        </header>

        <!-- Home View -->
        <div id="home-view">
            <!-- Hero Section -->
            <div class="hero" id="hero">
                <div class="hero-content">
                    <h1 class="hero-title" id="heroTitle">Loading...</h1>
                    <p class="hero-desc" id="heroOverview"></p>
                    <div>
                        <button class="btn btn-play" onclick="playHero()">▶ Play</button>
                        <button class="btn btn-info" onclick="infoHero()">ℹ More Info</button>
                    </div>
                </div>
            </div>

            <!-- Rows -->
            <div class="row" id="mainContent">
                <div id="trendingSection">
                    <h3>Trending Now</h3>
                    <div class="rec-grid" id="trendingRow">
                        <!-- Posters -->
                    </div>
                </div>

                <div id="allMoviesSection" style="margin-top: 60px;">
                    <h3>All Movies</h3>
                    <div class="rec-grid" id="allMoviesGrid">
                        <!-- Grid of movies -->
                    </div>
                    <div id="paginationControls"
                        style="display: flex; justify-content: center; gap: 20px; margin-top: 30px;">
                        <!-- Pagination buttons will be injected here -->
                    </div>
                </div>
            </div>

            <div class="row" id="searchResults" style="display:none;">
                <h3>Search Results</h3>
                <div class="rec-grid" id="searchGrid"></div>
            </div>
        </div>

        <!-- Movie Details View (Hidden by default) -->
        <div id="movie-view" style="display:none; padding-top: 80px;">
            <button onclick="showHome()"
                style="margin: 20px; padding: 10px 20px; background: #333; color: white; border: none; cursor: pointer;">&larr;
                Back to Home</button>

            <div class="hero" id="detailsHero" style="height: 60vh;">
                <div class="hero-content">
                    <h1 class="hero-title" id="detailsTitle">Loading...</h1>
                    <div class="modal-meta" id="detailsMeta"
                        style="margin-bottom: 20px; font-size: 1.2rem; color: #ccc;"></div>
                    <p class="hero-desc" id="detailsOverview"></p>
                    <button class="btn btn-play" onclick="alert('Playing movie...')">▶ Play</button>
                </div>
            </div>

            <div class="row">
                <h3>Recommendations</h3>
                <div class="rec-grid" id="detailsRecs">
                    <!-- Recommendations -->
                </div>
            </div>
            <div class="row" id="cfRecsSection" style="display:none; margin-top: 40px;">
                <h3>You may also like</h3>
                <div class="rec-grid" id="cfRecs">
                    <!-- Collaborative Filtering Recommendations -->
                </div>
            </div>
        </div>

    </div>

    <script src="js/app.js?v=6"></script>
</body>

</html>